# Autonomous Driving Vision System Configuration
# TurtleBot3 Burger with Raspberry Pi Camera (Wide)

# =============================================================================
# Camera Settings
# =============================================================================
camera:
  width: 640
  height: 480
  fps: 30
  image_topic: "/camera/image_raw/compressed"
  camera_info_topic: "/camera/camera_info"

# =============================================================================
# Network Settings (MacBook <-> TurtleBot)
# =============================================================================
network:
  turtlebot_ip: "192.168.0.18"
  ros_domain_id: 17
  stream_port: 8080

# =============================================================================
# Person Detection Settings (YOLOv8)
# =============================================================================
person_detection:
  model: "yolov8n.pt"
  confidence_threshold: 0.5
  person_class_id: 0
  danger_zone_ratio: 0.4
  caution_zone_ratio: 0.25

# =============================================================================
# Lane Detection Settings (for indoor taped track)
# =============================================================================
lane_detection:
  roi:
    top_ratio: 0.5
    bottom_ratio: 1.0
    left_ratio: 0.0
    right_ratio: 1.0

  white_tape:
    h_low: 0
    s_low: 0
    v_low: 180         # Lower from 200 for better low-light detection
    h_high: 180
    s_high: 35         # Increase from 30 to catch slightly colored white tape
    v_high: 255

  yellow_tape:
    h_low: 20
    s_low: 100
    v_low: 100
    h_high: 35
    s_high: 255
    v_high: 255

  blue_tape:
    h_low: 100
    s_low: 100
    v_low: 100
    h_high: 130
    s_high: 255
    v_high: 255

  canny:
    low_threshold: 40   # Lower from 50 for more edge sensitivity
    high_threshold: 120 # Lower from 150

  hough:
    rho: 2
    theta_degrees: 1
    threshold: 40       # Lower from 50 to detect more lines
    min_line_length: 30 # Lower from 40
    max_line_gap: 120   # Increase from 100 for better line connectivity

# =============================================================================
# Boundary Platform Detection Settings
# =============================================================================
boundary_detection:
  enabled: true
  roi:
    top_ratio: 0.6      # Bottom 40% of frame
    bottom_ratio: 1.0

  black_platform:
    h_low: 0
    h_high: 180
    s_low: 0
    s_high: 255
    v_low: 0
    v_high: 50

  # Zone division (0.33 = 33% from left)
  left_zone_boundary: 0.33
  right_zone_boundary: 0.67

  # Coverage thresholds
  block_threshold: 0.3           # 30% coverage = zone blocked
  full_block_threshold: 0.8      # 80% all zones = completely blocked

  # Avoidance strength (0.0 to 1.0)
  avoidance_strength: 0.6

# =============================================================================
# Traffic Light Detection Settings
# NOTE: Detection disabled in decision_maker.py (no traffic lights on track)
# =============================================================================
traffic_light:
  roi:
    top_ratio: 0.0
    bottom_ratio: 0.5
    left_ratio: 0.2
    right_ratio: 0.8

  red:
    h_low_1: 0
    h_high_1: 10
    h_low_2: 160
    h_high_2: 180
    s_low: 100
    s_high: 255
    v_low: 100
    v_high: 255

  yellow:
    h_low: 20
    h_high: 35
    s_low: 100
    s_high: 255
    v_low: 100
    v_high: 255

  green:
    h_low: 40
    h_high: 85
    s_low: 100
    s_high: 255
    v_low: 100
    v_high: 255

  min_area: 100
  min_circularity: 0.5

# =============================================================================
# Decision Making Settings
# =============================================================================
decision:
  priorities:
    pedestrian: 4       # Highest - safety first
    boundary: 3         # Boundary platform avoidance
    traffic_light: 2    # Disabled in code (no traffic lights on track)
    lane_following: 1   # Primary mode

  lane_pid:
    kp: 0.005
    ki: 0.0001
    kd: 0.001

  max_steering_angle: 0.5

# =============================================================================
# TurtleBot3 Control Settings
# =============================================================================
turtlebot:
  max_linear_velocity: 0.22
  max_angular_velocity: 2.84
  normal_speed: 0.15
  slow_speed: 0.08
  cmd_vel_topic: "/cmd_vel"
  emergency_stop_distance: 0.3

# =============================================================================
# Visualization Settings
# =============================================================================
visualization:
  show_windows: true
  show_fps: true
  show_detections: true
  show_lanes: true
  show_traffic_lights: true
  record_video: true
  output_path: "recordings/"
